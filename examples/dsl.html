<!DOCTYPE html>
<html>
<meta charset="utf-8">
<head>
    <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.2/underscore-min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.js"></script>

    <!-- plugins -->


    <!-- test data -->
    <script src="data.js"></script>

    <script src="countries.js"></script>
    <script src="tpStories.js"></script>
    <script src="dataTp.js"></script>

    <!-- css -->
    <link href="../build/production/tauCharts.default.min.css" rel="stylesheet"/>
    <!--<link href="../css/layout.css" rel="stylesheet"/>-->
    <!--<link href="../css/base.css" rel="stylesheet"/>-->
    <!--<link href="../css/legend.css" rel="stylesheet"/>-->
    <!--<link href="../css/tauCharts.css" rel="stylesheet"/>-->
    <!--<link href="../css/tooltip.css" rel="stylesheet"/>-->
    <!--<link href="../css/trendline.css" rel="stylesheet"/>-->
    <style>

        .axes.nest .axis.nest text {
            font-size: 10px;
        }
        .bar {
            fill: steelblue;
        }
        .cc {
            display:inline-block;
            margin:2px 2px 2px 2px;
            float:left;
            width: 800px;
            height: 800px;
            border: dotted 1px #000;
            overflow: auto;
        }

        .cc-empty {
            width: 260px;
            height: 260px;
            position: relative;
            left: 33%;
            top:33%;
            background-image: url("http://siliconangle.com/files/2013/02/no-data.png");
        }
    </style>
    <script>

        var COORDS = {
            RECT: function(dim, tail) {
                var subUnits = _.isArray(tail) ? tail : [tail];
                var isFacet = (subUnits[0].type === 'COORDS.RECT');
                return {
                    type: 'COORDS.RECT',
                    guide: {
                        showGridLines: (isFacet ? '' : 'xy'),
                        padding: {L: 64, B: 32, R: 8, T: 8}
                    },
                    axes: dim,
                    unit: subUnits
                };
            }
        };

        var DIM = function(x, y) {
            return [
                x ? {scaleDim: x} : null,
                y ? {scaleDim: y} : null
            ];
        };

        var ELEMENT = {
            POINT: function (x, y, color, size) {
                return {
                    type: 'ELEMENT.POINT',
                    x: x,
                    y: y,
                    color: color,
                    size: size
                };
            }
        };

//{
//    dimensions: {
//        project: { type: 'category' },
//        team: { type: 'category' },
//        cycleTime: { type: 'measure' },
//        effort: { type: 'measure' }
//    },
//    data: [],
//    unit: COORDS.RECT(DIM('project', 'team'), COORDS.RECT(DIM('cycleTime', 'effort'), ELEMENT.POINT('cycleTime', 'effort')))
//}
    </script>
</head>
<body>

<div id="stacked-vertical" class="cc"></div>
<div id="stacked-horizontal" class="cc"></div>
<div id="ppp" class="cc"></div>
<div id="parallel-container" class="cc"></div>
<div id="parallel-container1" class="cc"></div>

<div id="www" class="cc"></div>

<div id="geo1" class="cc"></div>

<div id="geo2" class="cc"></div>

<div id="geo3" class="cc"></div>

<div id="ooo" class="cc"></div>

<div id="xxx" class="cc"></div>

<div id="yyy" class="cc"></div>

<div id="no_x_label" class="cc"></div>

<div id="ordered_axes" class="cc"></div>

<div id="dates-progress-facet0" class="cc"></div>

<div id="dates-progress-facet" class="cc"></div>

<div id="object-color-legend-container" class="cc"></div>

<div id="xxx-datetime-container" class="cc"></div>

<div id="datetime-container" class="cc" style="width: 1605px"></div>

<div id="chart-container-extract" class="cc">
    
</div>

<div id="chart-container-default" class="cc">
</div>

<div id="chart-priority-container-default" class="cc">
</div>

<div id="chart-priority-container-extract" class="cc">
</div>

<div id="facet-of-facets-container" class="cc">
</div>

<div id="scatter-fit-container" class="cc">
</div>

<div id="scatter-auto-scale-container" class="cc">
</div>

<div id="complex-container-default" class="cc">
</div>

<div id="complex-container-extract" class="cc">
</div>

<div id="bars-container" class="cc">
</div>

<div id="null-complex-object-container" class="cc">
</div>

<!--<div id="no-data-container" class="cc"></div>-->

<script src="http://localhost:9000/tauCharts.js"></script>
<!--<script src="../build/development/tauCharts.js"></script>-->
<script src="../plugins/tooltip.js"></script>
<script src="../build/development/plugins/tauCharts.export.js"></script>
<script src="../plugins/legend.js"></script>
<script src="../plugins/trendline.js"></script>
<script src="../plugins/settings.js"></script>
<script src="../plugins/parallel-brushing.js"></script>
<script src="../plugins/parallel-tooltip.js"></script>
<script src="../plugins/geomap-tooltip.js"></script>
<script src="../plugins/geomap-legend.js"></script>
<script>

    var chart = new tauCharts.Chart({

        settings: {
            // fitModel: 'entire-view'
            fitModel: 'normal'
        },

        plugins: [
            tauCharts.api.plugins.get('settings')()
        ],

        type: 'horizontal-stacked-bar',
        y: [
            'p'//,
            //'x1'
        ],
        x: [
            // 'x2',
            'y1'
        ],

        color: 'c',

        data: [
            {"p":"A", "x1": "TP3", "x2": "B0", "y1": 2231},
            {"p":"A", "x1": "TP3", "x2": "B1", "y1": 3231},
            {"p":"A", "x1": "TP3", "x2": "B2", "y1": 3231},
            {"p":"A", "x1": "TP3", "x2": "B3", "y1": -3231},
            {"p":"A", "x1": "TP3", "x2": "B4", "y1": 3231},
            {"p":"A", "x1": "TP3", "x2": "B5", "y1": 3231},

            {"p":"B", "x1": "VDR", "x2": "C1", "y1": 720},
            {"p":"B", "x1": "VDR", "x2": "C2", "y1": -1720},
            {"p":"B", "x1": "VDR", "x2": "C3", "y1": 2720},
            {"p":"B", "x1": "VDR", "x2": "C4", "y1": 1720},
            {"p":"B", "x1": "VDR", "x2": "C5", "y1": 3720},
            {"p":"B", "x1": "VDR", "x2": "C6", "y1": 5720},
            {"p":"B", "x1": "VDR", "x2": "C7", "y1": -5720},
            {"p":"B", "x1": "VDR", "x2": "C8", "y1": 5720},

            {"p":"A", "x1": "TP2", "x2": "C9", "y1": -4987},
            {"p":"A", "x1": "TP2", "x2": "C10", "y1": -4987}
        ].map(function (x, i) {
                    // x.y1 = 'A' + String(i % 2);
                    x.c = x.y1 >= 0;
                    return x;
                })
    });

    chart.renderTo('#stacked-horizontal');

    var chart = new tauCharts.Chart({

        settings: {
            // fitModel: 'entire-view'
            fitModel: 'normal'
        },

        plugins: [
            tauCharts.api.plugins.get('settings')()
        ],

        type: 'stacked-bar',
        x: [
            'p'//,
            //'x1'
        ],
        y: [
            // 'x2',
            'y1'
        ],

        color: 'c',

        data: [
            {"p":"A", "x1": "TP3", "x2": "B0", "y1": 2231},
            {"p":"A", "x1": "TP3", "x2": "B1", "y1": 3231},
            {"p":"A", "x1": "TP3", "x2": "B2", "y1": 3231},
            {"p":"A", "x1": "TP3", "x2": "B3", "y1": -3231},
            {"p":"A", "x1": "TP3", "x2": "B4", "y1": 3231},
            {"p":"A", "x1": "TP3", "x2": "B5", "y1": 3231},

            {"p":"B", "x1": "VDR", "x2": "C1", "y1": 720},
            {"p":"B", "x1": "VDR", "x2": "C2", "y1": -1720},
            {"p":"B", "x1": "VDR", "x2": "C3", "y1": 2720},
            {"p":"B", "x1": "VDR", "x2": "C4", "y1": 1720},
            {"p":"B", "x1": "VDR", "x2": "C5", "y1": 3720},
            {"p":"B", "x1": "VDR", "x2": "C6", "y1": 5720},
            {"p":"B", "x1": "VDR", "x2": "C7", "y1": -5720},
            {"p":"B", "x1": "VDR", "x2": "C8", "y1": 5720},

            {"p":"A", "x1": "TP2", "x2": "C9", "y1": -4987},
            {"p":"A", "x1": "TP2", "x2": "C10", "y1": -4987}
        ].map(function (x, i) {
                    // x.y1 = 'A' + String(i % 2);
                    x.c = x.y1 >= 0;
                    return x;
                })
    });

    chart.renderTo('#stacked-vertical');

    var chart = new tauCharts.Chart({

        settings: {
            // fitModel: 'entire-view'
            fitModel: 'normal'
        },

        plugins: [
            tauCharts.api.plugins.get('settings')()
        ],

        type: 'scatterplot',
        x: [
            'p',
            'x1'
        ],
        y: [
            'x2',
            'y1'
        ],
        data: [
            {"p":"A", "x1": "TP3", "x2": "B0", "y1": 2231},
            {"p":"A", "x1": "TP3", "x2": "B1", "y1": 3231},
            {"p":"A", "x1": "TP3", "x2": "B2", "y1": 3231},
            {"p":"A", "x1": "TP3", "x2": "B3", "y1": 3231},
            {"p":"A", "x1": "TP3", "x2": "B4", "y1": 3231},
            {"p":"A", "x1": "TP3", "x2": "B5", "y1": 3231},

            {"p":"B", "x1": "VDR", "x2": "C1", "y1": 720},
            {"p":"B", "x1": "VDR", "x2": "C2", "y1": 1720},
            {"p":"B", "x1": "VDR", "x2": "C3", "y1": 2720},
            {"p":"B", "x1": "VDR", "x2": "C4", "y1": 1720},
            {"p":"B", "x1": "VDR", "x2": "C5", "y1": 3720},
            {"p":"B", "x1": "VDR", "x2": "C6", "y1": 5720},
            {"p":"B", "x1": "VDR", "x2": "C7", "y1": 5720},
            {"p":"B", "x1": "VDR", "x2": "C8", "y1": 5720},

            {"p":"A", "x1": "TP2", "x2": "C9", "y1": 4987},
            {"p":"A", "x1": "TP2", "x2": "C10", "y1": 4987}
        ].map(function (x, i) {
                    x.y1 = 'A' + String(i % 2);
                    return x;
                })
    });

    chart.renderTo('#ppp');

    // throw 1;

    d3.csv("/tauCharts/examples/cars.csv", function(error, cars) {

        var parallelChart = new tauCharts.Chart(
                {
                    type: 'parallel',
                    data: cars.map(function(r) {
                        return Object.keys(r).reduce(function(row, k) {
                            if (k !== 'name') {
                                row[k] = parseFloat(row[k]) || 0;
                            }
                            return row;
                        }, r);
                    }),
                    columns: ['economy (mpg)','cylinders','displacement (cc)','power (hp)','0-60 mph (s)','year'],
                    color: 'year',
                    plugins: [
                        tauCharts.api.plugins.get('parallel-brushing')({
                            forceBrush: {
                                year: [80, 81]
                            }
                        }),
                        tauCharts.api.plugins.get('parallel-tooltip')(),
                        tauCharts.api.plugins.get('geomap-legend')()
                    ]

                }).renderTo('#parallel-container');
    });

    var parallelChart = new tauCharts.Plot(
            {
                sources: {
                    '?': {
                        dims: {},
                        data: [{}]
                    },
                    '/': {
                        dims: {
                            'car': {type: 'category'},
                            'co2': {type: 'measure'},
                            'hp': {type: 'measure'},
                            'mpg': {type: 'measure'}
                        },
                        data: [
                            {car: "Toyota Prius+",       co2:  96, hp:  99, mpg: 3.8},
                            {car: "Volvo S60",           co2: 135, hp: 150, mpg: 7.4},
                            {car: "BMV X5",              co2: 197, hp: 306, mpg: 11.2},
                            {car: "Infinity FX",         co2: 238, hp: 238, mpg: 11.2},
                            {car: "Mercedes Vito",       co2: 203, hp:  95, mpg: 9.4},
                            {car: "Peugeot 3008",        co2: 155, hp: 120, mpg: 9.2},
                            {car: "Subaru Forester",     co2: 186, hp: 150, mpg: 10.4},
                            {car: "Lexus RX",            co2: 233, hp: 188, mpg: 13.3},
                            {car: "Bentley Continental", co2: 246, hp: 507, mpg: 15.4}
                        ]
                    }
                },

                scales: {
                    car: {type: 'ordinal', dim: 'car', source: '/'},
                    co2: {type: 'linear', dim: 'co2', source: '/'},
                    mpg: {type: 'linear', dim: 'mpg', source: '/'},
                    hp : {type: 'linear', dim: 'hp', source: '/'},
//                  size: {type: 'size', dim: 'count', source: '/', mid: 5, min: 1, max: 10},
//                  color: {type: 'color', dim: 'city', source: '/'},
                    color: {type: 'color', source: '?'}
                },

                unit: {
                    type: 'COORDS.PARALLEL',
                    color: 'color',
                    columns: ['car', 'hp', 'co2', 'mpg'],
                    expression: {
                        operator: 'none',
                        source: '/'
                    },
                    guide: {
                        padding: {l: 120, b: 50, t: 50, r: 50},
                        columns: {
                            car: {
                                label: {text: 'Car Name'},
                                brush: ['Lexus RX', 'BMV X5']
                            },
                            hp: {
                                label: {text: 'Horse power'},
                                brush: [150, 250]
                            },
                            co2: {label: {text: 'CO2'}},
                            mpg: {label: {text: 'Miles per galon'}}
                        }
                    },
                    units:[
                        {
                            type: 'PARALLEL/ELEMENT.LINE',
                            color: 'color',
                            columns: ['car', 'hp', 'co2', 'mpg'],
                            expression: {
                                operator: 'none',
                                source: '/'
                            }
                        }
                    ]
                },

                plugins: [
                    tauCharts.api.plugins.get('parallel-brushing')({
                        forceBrush: {
                            hp: [150, 200]
                        }
                    }),
                    tauCharts.api.plugins.get('parallel-tooltip')(),
                    tauCharts.api.plugins.get('geomap-legend')()
                ]

            }).renderTo('#parallel-container1');

    //throw 123;

    var chart = new tauCharts.Chart({
        type: 'map',
        latitude: 'y',
        longitude: 'x',
        color: 'color',
        size: 'size',
        data: [
            {x: 0.5, y: 51.32, color: 'green', size: 2},
            {x: 0.5, y: 15.32, color: 'red', size: 2}
        ],
        guide: {
            sourcemap: 'http://localhost:63342/tauCharts/src/addons/world-countries.json'
        },
        plugins: [
            tauCharts.api.plugins.get('geomap-tooltip')(),
            tauCharts.api.plugins.get('geomap-legend')()
        ]
    });

    chart.renderTo('#www');

    var chart = new tauCharts.Chart({
        type: 'map',
        latitude: 'y',
        longitude: 'x',
        size: 'size',
        data: [
            {x: 0.5, y: 51.32, color: 'green', size: 2},
            {x: 0.5, y: 51.35, color: 'red', size: 20}
        ],
        guide: {
            sourcemap: 'http://localhost:63342/tauCharts/src/addons/uk-subunits-places.json'
        },
        plugins: [
            tauCharts.api.plugins.get('geomap-tooltip')(),
            tauCharts.api.plugins.get('geomap-legend')()
        ]
    });

    chart.renderTo('#geo1');

    new tauCharts.Chart({
        type: 'map',
        code: 'state',
        fill: 'population',
        guide: {
            code: {georole:'states'},
            fill: {
//                brewer: _.times(9, function(i) {
//                    return 'rgba(150, 218, 195, ' + (0.1 * i + 0.1) + ')';
//                })
            },
            sourcemap: 'http://localhost:63342/tauCharts/src/addons/usa-states.json'
        },
        data: [
            {state: 'wa', population: 25},
            {state: 'ks', population: 35},
            {state: 'ca', population: 3005},
            {state: 'ma', population: 300},
            {state: 'ny', population: 250},
            {state: 'ak', population: 5000},
            {state: 'co', population: 1250}
        ],
        plugins: [
            tauCharts.api.plugins.get('geomap-tooltip')(),
            tauCharts.api.plugins.get('geomap-legend')()
        ]
    }).renderTo('#geo2');

    /**/
    new tauCharts.Plot(
            {
                sources: {
                    '?': {
                        dims: {},
                        data: [{}]
                    },
                    '/': {
                        dims: {},
                        data: [
                            {latitude: 42.36, longitude: -71, count: 5, city: 'Boston'},
                            {latitude: 34.03, longitude: -118.15, count: 25, city: 'LA'}
                        ]
                    }
                },

                scales: {
                    lat: {type: 'linear', dim: 'latitude', source: '/'},
                    lon: {type: 'linear', dim: 'longitude', source: '/'},
                    size: {type: 'size', dim: 'count', source: '/', mid: 5, min: 1, max: 10},
//                    color: {type: 'color', dim: 'city', source: '/'},
                    color: {type: 'color', source: '?'},
                    'value:default': {type: 'value', source: '?'},
                    'fill:default': {
                        type: 'fill',
                        source: '?'
                    }
                },

                unit: {
                    type: 'COORDS.MAP',
                    latitude: 'lat',
                    longitude: 'lon',
                    size: 'size',
                    color: 'color',

                    // code: 'value:default',
                    // fill: 'default:color',

                    expression: {
                        operator: 'none',
                        source: '/'
                    },

                    guide: {
                        sourcemap: 'http://localhost:63342/tauCharts/src/addons/usa-states.json'
                    }
                }

            }).renderTo('#geo3');

    /**/

    var chart0 = new tauCharts.Chart({
        "type": "horizontalBar",
        "color": "color",
        "size": null,
        "x": [
            "x1"
        ],
        "y": [
            "y1",
            "y2"
        ],
        "guide": [
            {
                "y": {
                    "label": "Feature",
                    "tickLabel": "name"
                }
            },
            {
                "x": {
                    "label": "Count"
                },
                "y": {
                    "label": "Name"
                },
                "color": {
                    "label": "Entity Type",
                    "tickLabel": "name"
                }
            }
        ],
        "dimensions": {
            "x1": {
                "type": "measure",
                "scale": "linear"
            },
            "y1": {
                "type": "category",
                "scale": "ordinal",
                "value": "id"
            },
            "y2": {
                "type": "category",
                "scale": "ordinal"
            },
            "color": {
                "type": "category",
                "scale": "ordinal",
                "value": "id"
            }
        },
        "data": [
            {
                "x1": 1,
                "y1": null,
                "y2": "board filter is shrunken beyond usability on horizontal resolutions < 800px",
                "color": {"id": 8, "name": "Bug"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": null,
                "y2": "Cards context menu is replaced to lists one in One by One mode",
                "color": {"id": 8, "name": "Bug"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": null,
                "y2": "Child tpr shouldn't be moved to the final state if current user doesn't have access to it",
                "color": {"id": 8, "name": "Bug"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": null,
                "y2": "Data layer exception when rename state to the same name as another state has but using different Case",
                "color": {"id": 8, "name": "Bug"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": null,
                "y2": "Non-admin should not be able to move states",
                "color": {"id": 8, "name": "Bug"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": null,
                "y2": "Open/total User Stories unit: 'U' icon is absent",
                "color": {"id": 8, "name": "Bug"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": null,
                "y2": "Quick Add new release in Project View - counter doesn't update",
                "color": {"id": 8, "name": "Bug"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": null,
                "y2": "Show more dissapears if it is in collapsed row and I mouse over it's row",
                "color": {"id": 8, "name": "Bug"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": null,
                "y2": "Tab counter is not updated",
                "color": {"id": 8, "name": "Bug"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": null,
                "y2": "Unable to open view generated from start page, zoom level is invalid",
                "color": {"id": 8, "name": "Bug"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": null,
                "y2": "You won't see releases which are from Iteration-based process Projects in the Project w/o Iterations practice, though these releases are related to not-iterative projects already",
                "color": {"id": 8, "name": "Bug"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": {"id": 84637, "name": "Cross-project Releases"},
                "y2": "In case feature 'Cross Project Releases' is toggled after using it -> the Release card stays shown on board for all the related projects.",
                "color": {"id": 8, "name": "Bug"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": {"id": 84637, "name": "Cross-project Releases"},
                "y2": "Permissions / context",
                "color": {"id": 4, "name": "UserStory"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": {"id": 84637, "name": "Cross-project Releases"},
                "y2": "Release is deleted when I delete the main project",
                "color": {"id": 8, "name": "Bug"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": {"id": 84637, "name": "Cross-project Releases"},
                "y2": "'Releases' tab on Project View should show all related releases",
                "color": {"id": 4, "name": "UserStory"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": {"id": 49128, "name": "Custom Graphic Reports MVF"},
                "y2": "Client-Server RnD in the wild",
                "color": {"id": 4, "name": "UserStory"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": {"id": 49126, "name": "Dashboards MVF"},
                "y2": "Add Dashboard",
                "color": {"id": 4, "name": "UserStory"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": {"id": 49126, "name": "Dashboards MVF"},
                "y2": "Dashboard setup with Widgets tab",
                "color": {"id": 4, "name": "UserStory"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": {"id": 49126, "name": "Dashboards MVF"},
                "y2": "Dashboards routing",
                "color": {"id": 4, "name": "UserStory"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": {"id": 54570, "name": "Easy States setup MVF"},
                "y2": "Back browser button isn't working when go back from View list to Process list",
                "color": {"id": 8, "name": "Bug"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": {"id": 54570, "name": "Easy States setup MVF"},
                "y2": "Links to projects in project popup",
                "color": {"id": 4, "name": "UserStory"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": {"id": 54570, "name": "Easy States setup MVF"},
                "y2": "Reorder states",
                "color": {"id": 4, "name": "UserStory"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": {"id": 54570, "name": "Easy States setup MVF"},
                "y2": "User should be redirected to view after Process setup close",
                "color": {"id": 8, "name": "Bug"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": {"id": 89998, "name": "Hierarchical Test Plans MMF"},
                "y2": "Show parent Test Plan Run on a Test Run/Plan Run View",
                "color": {"id": 4, "name": "UserStory"},
                "dataItem": null
            }, {
                "x1": 1,
                "y1": {"id": 90017, "name": "Test Plan Parameters MVF"},
                "y2": "Close child Test Plan Runs (move to the final state) when a parent Test Plan Run is moved to a final state",
                "color": {"id": 4, "name": "UserStory"},
                "dataItem": null
            }
        ]
    });
    chart0.renderTo('#ooo');

    var chart1 = new tauCharts.Chart({
        // "type": "scatterplot",
        "type": "bar",
        "color": null,
        "size": null,
        "x": [
            "x1",
            "x2"
        ],
        "y": [
            "y1"
        ],
        "guide": [
            {
                "x": {
                    "label": "Project"
                }
            },
            {
                "x": {
                    "label": "User Story"
                },
                "y": {
                    "label": "Count"
                }
            }
        ],
        "dimensions": {
            "x1": {
                "type": "category",
                "scale": "ordinal"
            },
            "x2": {
                "type": "category",
                "scale": "ordinal"
            },
            "y1": {
                "type": "measure",
                "scale": "linear"
            }
        },
        data: [

            {"p":"A", "x1": "TP3 Project Highlight", "x2": "B0", "y1": 2231},
            {"p":"A", "x1": "TP3 Project Highlight", "x2": "B1", "y1": 3231},
            {"p":"A", "x1": "TP3 Project Highlight", "x2": "B2", "y1": 3231},
            {"p":"A", "x1": "TP3 Project Highlight", "x2": "B3", "y1": 3231},
            {"p":"A", "x1": "TP3 Project Highlight", "x2": "B4", "y1": 3231},
            {"p":"A", "x1": "TP3 Project Highlight", "x2": "B5", "y1": 3231},

            {"p":"B", "x1": "VDR Project Highlight", "x2": "C1", "y1": 720},
            {"p":"B", "x1": "VDR Project Highlight", "x2": "C2", "y1": 1720},
            {"p":"B", "x1": "VDR Project Highlight", "x2": "C3", "y1": 2720},
            {"p":"B", "x1": "VDR Project Highlight", "x2": "C4", "y1": 1720},
            {"p":"B", "x1": "VDR Project Highlight", "x2": "C5", "y1": 3720},
            {"p":"B", "x1": "VDR Project Highlight", "x2": "C6", "y1": 5720},
            {"p":"B", "x1": "VDR Project Highlight", "x2": "C7", "y1": 5720},
            {"p":"B", "x1": "VDR Project Highlight", "x2": "C8", "y1": 5720},

            {"p":"A", "x1": "TP1 Project Highlight", "x2": "C9", "y1": 4987},

            {"p":"A", "x1": "TP2 Project Highlight", "x2": "C10", "y1": 4987},

            {"p":"A", "x1": "TP4 Project Highlight", "x2": "C10", "y1": 4987}
        ],

        plugins: [
            tauCharts.api.plugins.get('settings')()
        ]
    });
    chart1.renderTo('#xxx');

    var chart2 = new tauCharts.Chart({
        "type": "horizontalBar",
        "color": null,
        "size": null,
        "y": [
            "x1",
            "x2"
        ],
        "x": [
            "y1"
        ],
        "guide": [
            {
                "x": {
                    "label": "Project"
                }
            },
            {
                "x": {
                    "label": "User Story"
                },
                "y": {
                    "label": "Count"
                }
            }
        ],
        "dimensions": {
            "x1": {
                "type": "category",
                "scale": "ordinal"
            },
            "x2": {
                "type": "category",
                "scale": "ordinal"
            },
            "y1": {
                "type": "measure",
                "scale": "linear"
            }
        },
        data: [
            {"x1": "TP2", "x2": "A0", "y1": 4987},

            {"x1": "TP3", "x2": "B0", "y1": 2231},
            {"x1": "TP3", "x2": "B1", "y1": 3231},

            {"x1": "VDR", "x2": "C0", "y1": 720},
            {"x1": "VDR", "x2": "C1", "y1": 1720},
            {"x1": "VDR", "x2": "C2", "y1": 2720}
        ]
    });
    chart2.renderTo('#yyy');

    var chart = new tauCharts.Chart({
        "type": "horizontalBar",
        "color": "color",
        "size": null,
        "x": ["x1"],
        "y": ["y1", "y2"],
        "guide": [
            {
                "y": {"label": "Feature", "tickLabel": "name"}
            },
            {
                "x": {"label": "Effort"},
                "y": {"label": "Average Cycletime"},
                "color": {
                    "label": "Entity Type",
                    "tickLabel": "name"
                }
            }
        ],
        "dimensions": {
            "x1": {"type": "measure", "scale": "linear"},
            "y1": {"type": "category", "scale": "ordinal", "value": "id"},
            "y2": {"type": "measure", "scale": "linear"},
            "color": {"type": "category", "scale": "ordinal", "value": "id"}
        },
        data: [
            {
                "x1": 1,
                "y1": {"id": 54581, "name": "Advanced DSL Filters"},
                "y2": 794.56,
                "color": {"id": 4, "name": "User Story"},
                "dataItem": null
            }
        ]
    });
    chart.renderTo('#no_x_label');



    var chart = new tauCharts.Chart({
        type:'scatterplot',
        x: ['euroEco','co2'],
        y: ['power','hp'],
        dimensions: {
            car: {type: 'category'},
            euroEco: {
                type: 'category',
                order: ['eco', 'non-eco']
            },
            power: {
                type: 'order',
                order: ['low', 'normal', 'high']
            },
            co2: {type: 'measure'},
            hp: {type: 'measure'}
        },
        guide:[{
            split: false,
            padding: {l: 42, b: 24, r: 8, t: 8},
            x:{label:'euroEco'},
            y:{label:'power'}
        }, {
            showGridLines: 'xy',
            padding: {l: 52, b: 42, r: 8, t: 8},
            x: {label: 'CO2 emission, g/km'},
            y: {label: 'Horse power'}
        }],
        data: [
            {car: "Bentley Continental", co2: 246, hp: 507},
            {car: "Toyota Prius+", co2: 96, hp: 99},
            {car: "Volvo S60", co2: 135, hp: 150},
            {car: "BMV X5", co2: 197, hp: 306},
            {car: "Infinity FX", co2: 238, hp: 238},
            {car: "Mercedes Vito", co2: 203, hp: 95},
            {car: "Peugeot 3008", co2: 155, hp: 120},
            {car: "Subaru Forester", co2: 186, hp: 150},
            {car: "Lexus RX", co2: 233, hp: 188}
        ].map(function(x) {

                    x.euroEco = (x.co2 < 140) ? 'eco' : 'non-eco';
                    x.power = (x.hp < 150) ? 'low' : ((x.hp < 200) ? 'normal' : 'high');
                    return x;

                })

    });
    chart.renderTo('#ordered_axes');

    var dateTimeChart = new tauCharts.Chart(
            {
                data: [
                    {x1: {id: 2, name: "Tau Product - Kanban #1"}, y1: 49.798101851851854, color: 4},
                    {x1: {id: 13, name: "Tau Product Web Site - Scrum #1"}, y1: 28.225185185185186, color: 9},
                    {x1: {id: 13, name: "Tau Product Web Site - Scrum #1"}, y1: 25.218024691358025, color: 8},
                    {x1: {id: 13, name: "Tau Product Web Site - Scrum #1"}, y1: 44.834795875420872, color: 4},
                    {x1: {id: 2, name: "Tau Product - Kanban #1"}, y1: 10, color: 8},
                    {x1: {id: 2, name: "Tau Product - Kanban #1"}, y1: 20, color: 9},
                    {x1: {id: 2, name: "Tau Product - Kanban #1"}, y1: 30, color: 7},
                    {x1: {id: 2, name: "Tau Product - Kanban #1"}, y1: 40, color: 6},
                    {x1: {id: 2, name: "Tau Product - Kanban #1"}, y1: 50, color: 5},
                    {x1: {id: 2, name: "Tau Product - Kanban #1"}, y1: 60, color: 3},
                    {x1: {id: 2, name: "Tau Product - Kanban #1"}, y1: 70, color: 2},
                    {x1: {id: 2, name: "Tau Product - Kanban #1"}, y1: 80, color: 1},
                    {x1: {id: 2, name: "Tau Product - Kanban #1"}, y1: 90, color: 0},
                    {x1: {id: 2, name: "Tau Product - Kanban #1"}, y1: 100, color: 10}
                ].concat(_.times(10, function(x) { return x; }).map(function(i) {
                            return {
                                x1: {id: 2, name: "Tau Product - Kanban #1"},
                                y1: 100 + i * 3,
                                color: 11 + i
                            };
                        })),

                "type": "bar",
                "color": "color",
                "size": null,
                "x": ["x1"],
                "y": ["y1"],
                "guide": [
                    {
                        "x": {
                            "label": "Project",
                            "tickLabel": "name"
                        },
                        "y": {
                            "label": "Average Cycle Time"
                        },
                        "color": {
                            "label": "Entity Type Id"
                        }
                    }
                ],
                "dimensions": {
                    "x1": {
                        "type": "category",
                        "scale": "ordinal",
                        "value": "id"
                    },
                    "y1": {
                        "type": "measure",
                        "scale": "linear"
                    },
                    "color": {
                        "type": "measure",
                        "scale": "linear"
                    }
                }
            }).renderTo('#dates-progress-facet0');

    var offsetHrs = new Date().getTimezoneOffset() / 60;
    var offsetISO = '0' + Math.abs(offsetHrs) + ':00';
    var iso = function (str) {
        return (str + '+' + offsetISO);
    };

    new tauCharts.Chart({

        data: [
            {
                "complex": {
                    "id": 1,
                    "name": "TP3"
                },
                "date": new Date(iso("2015-01-08T00:00:00")),
                "simple": 0.1,
                "colorValue": "UserStory",
                "sizeValue": 10
            },
            {
                "complex": {
                    "id": 1,
                    "name": "TP3"
                },
                "date": new Date(iso("2015-01-08T00:00:00")),
                "simple": 0.2,
                "colorValue": "UserStory",
                "sizeValue": 10
            },
            {
                "complex": null,
                "date": new Date(iso("2015-01-09T00:00:00")),
                "simple": 0.9,
                "colorValue": "Bug",
                "sizeValue": 20
            },
            {
                "complex": null,
                "date": new Date(iso("2015-01-09T00:00:00")),
                "simple": 0.5,
                "colorValue": "Bug",
                "sizeValue": 20
            }
        ],

        "type": "scatterplot",
        "color": "colorValue",
        "size": "sizeValue",
        "x": [
            "complex"
        ],
        "y": [
            "date",
            "simple"
        ],
        "guide": [
            {
                "y": {
                    "label": "Create Date By Day",
                    "tickPeriod": "day"
                }
            },
            {
                "x": {
                    "label": "Project",
                    "tickLabel": "name"
                },
                "y": {
                    "label": "Progress",
                    "tickFormat":"percent"
                },
                "color": {
                    "label": "Entity Type"
                },
                "size": {
                    "label": "Effort"
                }

            }
        ],
        "dimensions": {
            "complex": {
                "type": "category",
                "scale": "ordinal",
                "value": "id"
            },
            "date": {
                "type": "order",
                "scale": "period"
            },
            "simple": {
                "type": "measure",
                "scale": "linear"
            },
            "colorValue": {
                "type": "category",
                "scale": "ordinal"
            },
            "sizeValue": {
                "type": "measure",
                "scale": "linear"
            }
        },
        plugins: [
            tauCharts.api.plugins.get('tooltip')({fields:['complex','date','simple','colorValue','sizeValue']}),
            tauCharts.api.plugins.get('legend')()
        ]
    }).renderTo('#dates-progress-facet');

    new tauCharts.Chart({

        data: [
            {"x1": {"id": 13, "name": "Tau Product Web Site - Scrum #1"}, "y1": 4},
            {"x1": {"id": 2, "name": "Tau Product Web Site - Kanban"}, "y1": 2},
            {"x1": {"id": 13, "name": "Tau Product Web Site - Scrum #1"}, "y1": 1},
            {"x1": null, "y1": 1}
        ],

        "type": "scatterplot",
        "color": "x1",
        "size": null,
        "x": ["x1"],
        "y": ["y1"],
        "guide": [
            {
                "x": {
                    "label": "Project",
                    "tickLabel": "name"
                },
                "y": {
                    "label": "Count"
                },
                "color": {
                    label: 'Project',
                    "tickLabel": "name"
                }
            }
        ],

        "dimensions": {
            "x1": {
                "type": "category",
                "scale": "ordinal",
                "value": "id"
            },
            "y1": {
                "type": "measure",
                "scale": "linear"
            }
        },

        plugins: [
            tauCharts.api.plugins.get('tooltip')(),
            tauCharts.api.plugins.get('legend')()/*,
            tauCharts.api.plugins.get('exportTo')()*/
        ]

    }).renderTo('#object-color-legend-container');

    new tauCharts.Chart({

        data: [
            {"x1": 6, "y1": 1415048400000, "y2": null},
            {"x1": 1, "y1": 1416430800000, "y2": null},
            {"x1": 1, "y1": 1416517200000, "y2": null},
            {"x1": 1, "y1": 1418590800000, "y2": "About Us page"},
            {"x1": 2, "y1": 1415566800000, "y2": "Advanced REST API"},
            {"x1": 2, "y1": 1418590800000, "y2": "Contacts page"},
            {"x1": 1, "y1": 1415653200000, "y2": "Delete User"},
            {"x1": 2, "y1": 1418590800000, "y2": "Home page"},
            {"x1": 2, "y1": 1419368400000, "y2": "Integrate Twitter feed"},
            {"x1": 2, "y1": 1419368400000, "y2": "Put RSS Feeds on Home page"},
            {"x1": 2, "y1": 1418590800000, "y2": "Support page"}
        ],

        "dimensions": {
            "x1": {
                "type": "measure",
                "scale": "linear"
            },
            "y1": {
                "type": "order",
                "scale": "period"
            },
            "y2": {
                "type": "category",
                "scale": "ordinal"
            }
        },

        "type": "horizontalBar",
        "color": null,
        "size": null,
        "x": [
            "x1"
        ],
        "y": [
            "y1",
            "y2"
        ],
        "guide": [
            {
                "y": {
                    "label": "Create Date By Day",
                    // "tickPeriod": "day",
                    "tickFormat": "day"
                }
            },
            {
                "x": {
                    "label": "Count"
                },
                "y": {
                    "label": "User Story"
                }
            }
        ]

    }).renderTo('#xxx-datetime-container');

    var facet2x2 = {
        dimensions: {
            project: { type: 'category' },
            team: { type: 'category' },
            cycleTime: { type: 'measure' },
            effort: { type: 'measure' }
        },
        unit: {
            type: 'COORDS.RECT',
            guide: {
                padding: {l: 152, b: 48, r: 0, t: 0},
                x: {label: { text: 'Projects', padding: 32}},
                y: {label: { text: 'Teams', padding: 120}}
            },
            x: 'project',
            y: 'team',
            unit: [
                {
                    type: 'COORDS.RECT',
                    guide: {
                        showGridLines: 'xy',
                        padding: { l:54, b:28, r:16, t:16 },
                        x: {padding: 8, label: ''},
                        y: {padding: 8, label: 'effort'}
                    },
                    x: 'cycleTime',
                    y: 'effort',
                    unit: [
                        {
                            type: 'ELEMENT.POINT',
                            color: 'effort',
                            size: 'cycleTime',
                            shape: null
                        }
                    ]
                }
            ]
        }
    };

    var facetPriority = {
        dimensions: {
            priority: {
                type: 'category',
                value: 'key'
            },
            severity: {
                type: 'order',
                order: ['Must Have', 'Nice to have']
            },
            project: { type: 'category' },
            team: { type: 'category' },
            cycleTime: { type: 'measure' },
            effort: { type: 'measure' }
        },
        unit: {
            type: 'COORDS.RECT',
            x: 'project',
            y: 'severity',
            unit: [
                {
                    type: 'COORDS.RECT',
                    guide: {
                        x: {tickLabel: 'val'},
                    },
                    x: 'priority',
                    y: 'effort',
                    unit: [
                        {
                            type: 'ELEMENT.POINT'
                        }
                    ]
                }
            ]
        }
    };

    var facetOfFacets = {
        dimensions: {
            project: { type: 'category' },
            team: { type: 'category' },
            cycleTime: { type: 'measure' },
            effort: { type: 'measure' },
            name: { type: 'category' }
        },
        unit: {
            type: 'COORDS.RECT',
//            guide: {
//                padding: {l: 0, b: 0, r: 0, t: 0}
//            },
//            x: null,
//            y: null,
            unit: [
                {
                    type: 'COORDS.RECT',
                    guide: {
                        showGridLines: 'xy',
                        padding: { l:72, b:224, r:8, t:8 },
                        y: {label: { text: 'Effort', padding:52}, tickMin: 0, tickMax: 100},
                        x: {rotate: 90, textAnchor: 'start', hide: true}
                    },
                    y: 'effort',
                    x: 'name',
                    unit: [
                        {type: 'ELEMENT.INTERVAL'}
                    ]
                },
                {
                    type: 'COORDS.RECT',
                    guide: {
                        showGridLines: 'xy',
                        padding: { l:72, b:224, r:8, t:8 },
                        y: {label: 'Cycle Time', tickMin: 0, tickMax: 100},
                        x: {rotate: 45, textAnchor: 'start'}
                    },
                    x: 'name',
                    y: 'cycleTime',
                    unit: [
                        {type: 'ELEMENT.POINT'},
                        {type: 'ELEMENT.LINE'}
                    ]
                }
            ]
        }
    };

    var scatter = {
        dimensions: {
            project: { type: 'category' },
            team: { type: 'category' },
            cycleTime: { type: 'measure' },
            effort: { type: 'measure' }
        },
        unit: {
            type: 'COORDS.RECT',
            guide: {
                showGridLines: 'xy',
                padding: { l:56, b:46, r:8, t:8 },
                x: {padding: 8, label: 'Cycle Time'},
                y: {padding: 8, label: 'Effort'}
            },
            x: 'cycleTime',
            y: 'effort',
            unit: [
                {
                    type: 'ELEMENT.POINT',
                    color: 'effort',
                    size: 'cycleTime'
                }
            ]
        }
    };

    var facet3x1 = {
        dimensions: {
            project: { type: 'category' },
            team: { type: 'category' },
            cycleTime: { type: 'measure' },
            effort: { type: 'measure' }
        },
        unit: {
            type: 'COORDS.RECT',
            guide: {
                padding: { l:46, b:32, r:0, t:2 },
                y: {label: 'Projects', fitToFrameByDims: false}
            },
            x: null,
            y: 'project',
            unit: [
                {
                    type: 'COORDS.RECT',
                    guide: {
                        padding: { l:120, b:4, r:8, t:4 },
                        y: {label: { text: 'Teams', padding: 100 }, fitToFrameByDims: ['project']}
                    },
                    x: null,
                    y: 'team',
                    unit: [
                        {
                            type: 'COORDS.RECT',
                            guide: {
                                showGridLines: 'xy',
                                padding: { l:48, b:0, r:8, t:4 },
                                x: {label: 'cycle time', padding: 4},
                                y: {label: 'effort', padding: 4}
                            },
                            x: 'cycleTime',
                            y: 'effort',
                            unit: [
                                {
                                    type: 'ELEMENT.POINT',
                                    color: 'effort',
                                    size: 'cycleTime'
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    };

    var dateTimeChart = new tauCharts.Plot(
            {
                layoutEngine: 'DEFAULT',
                data: [
                    {xdate: +new Date('2013-12-01T00:00:00Z'), count: 31},
                    {xdate: +new Date('2014-01-01T00:00:00Z'), count: 27},
                    {xdate: +new Date('2014-02-01T00:00:00Z'), count: 22},
                    {xdate: +new Date('2014-03-01T00:00:00Z'), count: 13},
                    {xdate: +new Date('2014-04-01T00:00:00Z'), count: 9},
                    {xdate: +new Date('2014-05-01T00:00:00Z'), count: 5},
                    {xdate: +new Date('2014-06-01T00:00:00Z'), count: 1},
                    {xdate: +new Date('2014-07-01T00:00:00Z'), count: -3},
                    {xdate: +new Date('2014-08-01T00:00:00Z'), count: -5},
                    {xdate: +new Date('2014-09-01T00:00:00Z'), count: -7},
                    {xdate: +new Date('2014-10-01T00:00:00Z'), count: -9},
                    {xdate: +new Date('2014-11-01T00:00:00Z'), count: -11},
                    {xdate: +new Date('2014-12-01T00:00:00Z'), count: -17},
                    {xdate: +new Date('2015-01-01T00:00:00Z'), count: -27},
                    {xdate: +new Date('2015-02-01T00:00:00Z'), count: -53}
                ].map(function(x) {
                            x.xdate = x.xdate + (new Date()).getTimezoneOffset() * 60 * 1000;
                            return x;
                        }),
                spec: {
                    dimensions: {
                        xdate: {type: 'order', scale: 'period'},
                        count: {type: 'measure'}
                    },
                    unit: {
                        type: 'COORDS.RECT',
                        guide: {
                            x: {
                                tickPeriod: 'month'
                            }
                        },
                        x: 'xdate',
                        y: 'count',
                        unit: [
                            { type: 'ELEMENT.INTERVAL' },
                            { type: 'ELEMENT.POINT' },
                            { type: 'ELEMENT.LINE' }
                        ]
                    }
                },
                plugins: [
                    tauCharts.api.plugins.get('trendline')(),
                    tauCharts.api.plugins.get('tooltip')({fields:['count']})
                ]
            }).renderTo('#datetime-container');

    var rawData = _.map(
            getUserStories(),
            function (r, i) {
                r.cycleTime = r.name.length;
                var k = i % 2;
                r.priority = {
                    key: k,
                    val: k ? 'High': 'Low'
                };

                r.priorityName = k ? 'High': 'Low';

                r.severity = k ? 'Must Have': 'Nice to have';

                if (i === 7) {
                    r.severity = 'Out of index';
                }

                return r;
            });

    new tauCharts.Plot(
            {
                layoutEngine: 'DEFAULT',
                data: rawData,
                spec: facet2x2,
                plugins: [
                    tauCharts.api.plugins.get('trendline')(),
                    tauCharts.api.plugins.get('tooltip')({fields:['team', 'project', 'cycleTime', 'effort']})
                ]
            }).renderTo('#chart-container-default');

    new tauCharts.Plot(
            {
                layoutEngine: 'EXTRACT',
                data: rawData,
                spec: facet2x2,
                plugins: [
                    tauCharts.api.plugins.get('trendline')(),
                    tauCharts.api.plugins.get('tooltip')({fields:['team', 'project', 'cycleTime', 'effort']})
                ]
            }).renderTo('#chart-container-extract');

    new tauCharts.Plot(
            {
                layoutEngine: 'DEFAULT',
                data: rawData,
                spec: facetPriority,
                plugins: [
                    tauCharts.api.plugins.get('tooltip')({fields:['team', 'project', 'cycleTime', 'effort', 'priorityName', 'severity']})
                ]
            }).renderTo('#chart-priority-container-default');

    new tauCharts.Plot(
            {
                layoutEngine: 'EXTRACT',
                data: rawData,
                spec: facetPriority,
                plugins: [
                    tauCharts.api.plugins.get('tooltip')({fields:['team', 'project', 'cycleTime', 'effort', 'priorityName', 'severity']})
                ]
            }).renderTo('#chart-priority-container-extract');

    new tauCharts.Plot(
            {
                data: _(rawData).filter(function(x, i) { return i < 10; }),
                spec: facetOfFacets,
//                layoutEngine: 'DEFAULT',
                plugins: [
                    tauCharts.api.plugins.get('tooltip')({fields:['name', 'cycleTime', 'effort']})
                ]
            });//.renderTo('#facet-of-facets-container');

    var scatterFitChart = new tauCharts.Plot(
            {
                data: rawData,
                spec: scatter,
                plugins: [
                    tauCharts.api.plugins.get('tooltip')({fields:['team', 'project', 'cycleTime', 'effort']}),
                    tauCharts.api.plugins.get('trendline')(),
                    tauCharts.api.plugins.get('legend')()
                ]
            }).renderTo('#scatter-auto-scale-container');

    var scatterAutoScaleChart = new tauCharts.Plot(
            {
                data: rawData,
                spec: {
                    dimensions: {
                        project: { type: 'category' },
                        team: { type: 'category' },
                        cycleTime: { type: 'measure' },
                        effort: { type: 'measure' }
                    },
                    unit: {
                        type: 'COORDS.RECT',
                        guide: {
                            showGridLines: 'xy',
                            padding: { l:56, b:46, r:8, t:8 },
                            x: {
                                padding: 8,
                                label: 'Cycle Time',
                                autoScale: false
                            },
                            y: {
                                padding: 8,
                                label: 'Effort',
                                autoScale: false
                            }
                        },
                        x: 'cycleTime',
                        y: 'effort',
                        unit: [
                            {
                                type: 'ELEMENT.POINT',
                                color: 'effort',
                                size: 'cycleTime',
                                shape: null
                            }
                        ]
                    }
                },
                plugins: [
                    tauCharts.api.plugins.get('tooltip')({fields:['team', 'project', 'cycleTime', 'effort']})
                ]
            }).renderTo('#scatter-fit-container');

    new tauCharts.Plot(
            {
                layoutEngine: 'DEFAULT',
                data: rawData,
                spec: facet3x1,
                plugins: [
                    tauCharts.api.plugins.get('tooltip')({fields:['team', 'project', 'cycleTime', 'effort']})
                ]
            }).renderTo('#complex-container-default');

    new tauCharts.Plot(
            {
                layoutEngine: 'EXTRACT',
                data: rawData,
                spec: facet3x1,
                plugins: [
                    tauCharts.api.plugins.get('tooltip')({fields:['team', 'project', 'cycleTime', 'effort']})
                ]
            }).renderTo('#complex-container-extract');

    var noDataChart = new tauCharts.Plot(
            {
                data: [],
                spec: facet3x1,
                plugins: [
                    tauCharts.api.plugins.get('tooltip')({fields:['team', 'project', 'cycleTime', 'effort']})
                ]
            });//.renderTo('#no-data-container');

    getCountOfEntitiesByTeamOnMonth().then(function (data) {

        data = data.map(function(x) {
            var toks = x.month.split(' - ');
            x.month = new Date(toks[0], toks[1], 1);
            return x;
        });

        var facet2x1 = {
            dimensions: {
                month: { type: 'measure', scale: 'time' },
                team: { type: 'category' },
                count: { type: 'measure' }
            },
            unit: {
                type: 'COORDS.RECT',
                x: null,
                y: 'team',
                unit: [
                    {
                        type: 'COORDS.RECT',
                        x: 'month',
                        y: 'count',
                        unit: [
                            {
                                type: 'ELEMENT.POINT'
                            },
                            {
                                type: 'ELEMENT.INTERVAL'
                            },
                            {
                                type: 'ELEMENT.LINE'
                            }
                        ]
                    }
                ]
            }
        };

        new tauCharts.Plot(
                {
                    layoutEngine: 'EXTRACT',
                    data: data,
                    spec: facet2x1,
                    plugins: [
                        tauCharts.api.plugins.get('trendline')(),
                        tauCharts.api.plugins.get('tooltip')({fields:['team', 'count', 'month']})
                    ]
                }).renderTo('#bars-container');
    });

    new tauCharts.Chart(
            {
                plugins: [
                    tauCharts.api.plugins.get('trendline')(),
                    tauCharts.api.plugins.get('tooltip')({fields:['team', 'count', 'month']})
                ],
                "type": "scatterplot",
                "x": "entityType",
                "y": "userStory",
                "color": "effort",
                "dimensions": {
                    "entityType": {"type": "category"},
                    "userStory": {"type": "category", "value": "id"},
                    "effort": {"type": "measure"}
                },
                data: [
                    {
                        "entityType":"Bug",
                        "userStory":{
                            "id":2,
                            "name":"ww"
                        },
                        "effort":0.0000
                    },
                    {
                        "entityType":"Bug",
                        "userStory":null,
                        "effort":0.0000
                    },
                    {
                        "entityType":"Bug",
                        "userStory":null,
                        "effort":0.0000
                    },
                    {
                        "entityType":"Bug",
                        "userStory":{
                            "id":11,
                            "name":"NoCustom"
                        },
                        "effort":0.0000
                    }
                ]
            }
    ).renderTo('#null-complex-object-container');
</script>
</body>
</html>
